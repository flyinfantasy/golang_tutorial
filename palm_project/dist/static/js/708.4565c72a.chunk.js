"use strict";(self.webpackChunkx_race=self.webpackChunkx_race||[]).push([[708],{3708:function(e,t,n){n.r(t);var r=n(3433),i=n(1413),a=n(9439),o=n(2791),s=n(6937),u=n(961),l=n(3465),c=n(6094),m=n(9240),g=n(1632),p=n(9806),d=n(184),f=function(){var e=(0,o.useContext)(l.U),t=e.$,n=e.setReducer,f=e.getReducer,_=(0,o.useRef)(null),x=f((function(e){var t=e.dashBoardChildPigeonStatus,n=e.dashBoard,r=e.login;return{paginationObj:t.paginationObj,paginationOptions:t.paginationOptions,pigeonStatusData:t.pigeonStatusData,choiceDate:n.choiceDate,choicePigeonLoftCode:n.choicePigeonLoftCode,clubCode:r.loginInfo.fromListClub||r.loginInfo.club,clubDate:r.loginInfo.currentDate,reflashCount:n.reflashCount}})),h=x.paginationObj,v=x.paginationOptions,I=x.pigeonStatusData,C=x.choiceDate,b=x.choicePigeonLoftCode,N=x.clubCode,j=x.clubDate,S=x.reflashCount,P=(0,o.useState)({currentRenderItem:[],sortColumn:"",reverseSort:!1}),y=(0,a.Z)(P,2),D=y[0],w=D.currentRenderItem,O=D.sortColumn,Q=D.reverseSort,R=y[1],Z=(0,i.Z)((0,i.Z)({gridHeaderItem:{gridHeaderWidth:["minmax(85px, 5%)","minmax(156px, 12.5%)","minmax(156px, 12.5%)","minmax(202px, 16.25%)","minmax(202px, 16.25%)","minmax(156px, 12.5%)","minmax(156px, 12.5%)","minmax(156px, 12.5%)"],renderHeaderItem:t.maps([{sortColumn:"rowNum",columnName:"\u7b46\u6578"},{sortColumn:"pigeon_loft",columnName:"\u9d3f\u820d\u7de8\u865f"},{sortColumn:"reset_server_receive_date_time",columnName:"\u638c\u4e2d\u5bf6\u6642\u9593"},{sortColumn:"",columnName:"\u7d93\u5ea6"},{sortColumn:"",columnName:"\u7def\u5ea6"},{sortColumn:"signal_strength",columnName:"\u8a0a\u865f\u5f37\u5ea6"},{sortColumn:"electricity",columnName:"\u96fb\u91cf"},{sortColumn:"plugged_in",columnName:"\u5145\u96fb"}],(function(e,t){var n=e.sortColumn,r=e.columnName;return(0,d.jsxs)("div",{className:n?"use-sort":"",onClick:function(){return R((function(e){return(0,i.Z)((0,i.Z)({},e),{},{sortColumn:n,reverseSort:!Q})}))},children:[r,n?(0,d.jsx)(p.G,{icon:g.CmM}):""]},t)}))},gridBodyItem:{renderBodyItem:t.maps(w,(function(e,n){return(0,d.jsxs)("div",{className:n%2!==0?"table-grid-body-column bg-double":"table-grid-body-column bg-single",style:{gridTemplateColumns:"minmax(85px, 5%) minmax(156px, 12.5%) minmax(156px, 12.5%) minmax(202px, 16.25%) minmax(202px, 16.25%) minmax(156px, 12.5%) minmax(156px, 12.5%) minmax(156px, 12.5%)"},children:[(0,d.jsx)("div",{children:e.rowNum}),(0,d.jsx)("div",{children:e.pigeon_loft}),(0,d.jsx)("div",{className:e.reset_server_receive_date_time.split("|").at(0),children:e.reset_server_receive_date_time.split("|").at(1)}),(0,d.jsx)("div",{children:e.latitude}),(0,d.jsx)("div",{children:e.longitude}),(0,d.jsx)("div",{className:t.convert(e.signal_strength,"number")<=20?"red-sign":"",children:e.signal_strength}),(0,d.jsx)("div",{className:t.convert(e.electricity,"number")<=40?"red-sign":"",children:e.electricity}),(0,d.jsx)("div",{children:t.convert(t.convert(e.plugged_in,"number"),"boolean")?"\u63d2\u96fb":"\u672a\u63d2\u96fb"})]},n)}))}},h),{},{postNext:function(e){return n(c.eQ,"setPigeonStatusPaginationOptions",e)}});return clearInterval(_.current),_.current=setInterval((function(){0===S?(n(m.eQ,"setReflashCount",10),n(c.eQ,"getPigeonStateData",{club:N,date:C||j})):n(m.eQ,"setReflashCount",S-1)}),1e3),(0,o.useEffect)((function(){var e=v.pages,a=v.partPage,o=v.pageSize,u=(0,s._T)(function(){var e=b?t.filter(I,(function(e){return e.pigeon_loft.match(b)})):I;return t.sort((0,r.Z)(e),(function(e,t){return{"":e.rowNum-t.rowNum,rowNum:Q?t.rowNum-e.rowNum:e.rowNum-t.rowNum,pigeon_loft:Q?parseInt(e.pigeon_loft)-parseInt(t.pigeon_loft):parseInt(t.pigeon_loft)-parseInt(e.pigeon_loft),reset_server_receive_date_time:function(){var n=e.reset_server_receive_date_time.split("|").at(-1),r=t.reset_server_receive_date_time.split("|").at(-1);return Q?parseInt(n)-parseInt(r):parseInt(r)-parseInt(n)}(),signal_strength:Q?parseInt(e.signal_strength)-parseInt(t.signal_strength):parseInt(t.signal_strength)-parseInt(e.signal_strength),electricity:Q?parseInt(e.electricity)-parseInt(t.electricity):parseInt(t.electricity)-parseInt(e.electricity),plugged_in:Q?parseInt(e.plugged_in)-parseInt(t.plugged_in):parseInt(t.plugged_in)-parseInt(e.plugged_in)}[O]}))}(),e,a,o),l=u.pageObj,m=u.renderItem;R((function(e){return(0,i.Z)((0,i.Z)({},e),{},{currentRenderItem:m})})),n(c.eQ,"setPigeonStatusPaginationObj",(0,i.Z)({},l))}),[v,I,b,Q]),(0,o.useEffect)((function(){n(m.eQ,"setReflashCount",10),N&&j&&n(c.eQ,"getPigeonStateData",{club:N,date:C||j})}),[C,Q]),(0,o.useEffect)((function(){if(N||j)return n(m.eQ,"setReflashCount",10),n(c.eQ,"setPigeonStatusPaginationOptions",{pages:1,partPage:10,pageSize:10}),n(c.eQ,"getPigeonStateData",{club:N,date:C||j}),function(){clearInterval(_.current)}}),[N,j]),(0,d.jsx)(u.Sn,(0,i.Z)({},Z))};t.default=(0,o.memo)(f)}}]);
//# sourceMappingURL=708.4565c72a.chunk.js.map